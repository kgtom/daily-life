## 学习大纲
* [一、概况](#1)
* [二、事务回滚](#2)
* [三、代码库回滚](#3)
* [四、部署版本回滚](#4)
* [五、数据版本回滚](#5)
* [六、静态资源版本回滚](#6)
* [七、总结](#7)


## <span id="1">一、概况</span>
回滚是指当程序或数据出错时，将程序或数据恢复到最近一个正确版本的行为。最常见的如：
事务回滚、代码库回滚、部署版本回滚、数据版本回滚、静态资源版本回滚等。通过回滚保证系统在某个场景下的高可用。

## <span id="2">二、事务回滚</span>
目的：保持数据的最终一致性。

* 单库事务直接sql回滚
* 分布式数据库最常见：两阶段提交、三阶段提交、消息队列、事后补偿等实现最终的一致性
例如购买机票结算流程：
   提交订单
   --->调用优惠券服务，成功了调用下一个，
   --->调用库存服务，成功了调用下一个，
   --->调用订单服务
   - 1.三个服务如果其中失败了，则回滚之前的，如果最后一个失败了，服务器挂了，这个时候需要从本地记录事务日志进行分析，然后回滚。或者定期扫描优惠券和库存表，回滚没有关联的订单或者已经取消的订单。
   - 2.下单后一直没有支付，比如30分钟，此时就要定期扫描订单表，然后回滚优惠券和库存服务。
   
   ## <span id="3">二、代码库回滚</span>
